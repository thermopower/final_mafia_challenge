# Use Cases - 대학교 데이터 시각화 대시보드

## 개요

본 디렉토리는 대학교 사내 데이터 시각화 대시보드 프로젝트의 유스케이스 명세를 포함합니다.

각 유스케이스는 `/docs/userflow.md`에 정의된 기능을 기반으로 작성되었으며, 개발 시 참고할 상세한 시나리오와 비즈니스 규칙을 포함합니다.

## 유스케이스 목록

### UC-001: 사용자 로그인
- **경로**: `/docs/usecases/001/spec.md`
- **Primary Actor**: 대학교 내부 직원
- **설명**: 사용자가 이메일과 비밀번호를 사용하여 시스템에 로그인합니다.
- **주요 시나리오**:
  - 자격증명 입력 → Supabase Auth 인증 → JWT 토큰 발급 → 대시보드 리다이렉트
- **핵심 비즈니스 규칙**:
  - 연속 5회 로그인 실패 시 15분간 계정 잠금
  - JWT 토큰 만료 시간 24시간
  - 비활성화된 계정은 로그인 불가

### UC-002: 대시보드 조회
- **경로**: `/docs/usecases/002/spec.md`
- **Primary Actor**: 인증된 대학교 직원
- **설명**: 사용자가 시각화된 대시보드를 통해 주요 지표(KPI)와 차트를 확인합니다.
- **주요 시나리오**:
  - 대시보드 접근 → 데이터 조회 → 차트 렌더링 → 필터링 가능
- **핵심 비즈니스 규칙**:
  - 대시보드 로딩 시간 3초 이내
  - 기본 필터: 현재 연도, 전체 부서
  - 데이터 캐싱 TTL 5분

### UC-003: Excel 파일 업로드
- **경로**: `/docs/usecases/003/spec.md`
- **Primary Actor**: 관리자
- **설명**: 관리자가 이카운트에서 추출한 Excel 파일을 시스템에 업로드하여 데이터를 저장합니다.
- **주요 시나리오**:
  - 파일 선택 → 데이터 유형 선택 → 업로드 → 파싱 및 검증 → 데이터베이스 저장
- **핵심 비즈니스 규칙**:
  - 지원 형식: .xlsx, .xls (최대 10MB)
  - 필수 컬럼 검증 및 데이터 타입 검증
  - 트랜잭션 보장 (전체 성공 또는 전체 롤백)
  - 중복 데이터 처리 옵션 제공

### UC-004: 데이터 조회 및 필터링
- **경로**: `/docs/usecases/004/spec.md`
- **Primary Actor**: 인증된 대학교 직원
- **설명**: 사용자가 테이블 형식으로 데이터를 조회하고 필터링합니다.
- **주요 시나리오**:
  - 데이터 조회 페이지 접근 → 필터 적용 → 테이블 표시 → 상세 정보 모달
- **핵심 비즈니스 규칙**:
  - 기본 페이지 크기 20행 (50, 100 변경 가능)
  - 검색어는 2자 이상, 500ms 디바운싱
  - 관리자만 데이터 수정/삭제 가능

### UC-005: 데이터 내보내기 (CSV)
- **경로**: `/docs/usecases/005/spec.md`
- **Primary Actor**: 인증된 대학교 직원
- **설명**: 사용자가 필터링된 데이터를 CSV 파일로 다운로드합니다.
- **주요 시나리오**:
  - CSV 다운로드 버튼 클릭 → 확인 → CSV 생성 → 파일 다운로드
- **핵심 비즈니스 규칙**:
  - UTF-8 with BOM 인코딩 (Excel 한글 호환)
  - 10,000건 초과 시 경고 메시지
  - 100,000건 초과 시 비동기 처리 및 이메일 발송
  - 최대 파일 크기 100MB

### UC-006: 프로필 관리
- **경로**: `/docs/usecases/006/spec.md`
- **Primary Actor**: 인증된 대학교 직원
- **설명**: 사용자가 자신의 프로필 정보를 조회 및 수정하고 비밀번호를 변경합니다.
- **주요 시나리오**:
  - 프로필 조회 → 프로필 수정 또는 비밀번호 변경
- **핵심 비즈니스 규칙**:
  - 수정 가능 필드: 이름, 소속 부서, 프로필 사진
  - 비밀번호 정책: 8자 이상, 영문+숫자+특수문자
  - 비밀번호 변경 후 자동 로그아웃
  - 이전 3개 비밀번호 재사용 불가

### UC-007: 로그아웃
- **경로**: `/docs/usecases/007/spec.md`
- **Primary Actor**: 인증된 대학교 직원
- **설명**: 사용자가 시스템에서 로그아웃합니다.
- **주요 시나리오**:
  - 로그아웃 버튼 클릭 → 확인 → 세션 무효화 → 로그인 페이지 리다이렉트
- **핵심 비즈니스 규칙**:
  - 비활성 타임아웃 30분 (1분 전 경고)
  - 로그아웃 이력 기록
  - 모든 토큰 삭제 및 AuthContext 초기화

## 유스케이스 다이어그램

```
┌─────────────────────────────────────────────────────────┐
│                   사용자 로그인 (UC-001)                 │
│                           │                             │
│                           ▼                             │
│              ┌─────────────────────────┐                │
│              │  대시보드 조회 (UC-002)  │                │
│              └─────────────────────────┘                │
│                 │        │        │                     │
│         ┌───────┘        │        └────────┐            │
│         ▼                ▼                 ▼            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │ Excel 업로드 │  │ 데이터 조회  │  │ 프로필 관리  │     │
│  │  (UC-003)   │  │  (UC-004)   │  │  (UC-006)   │     │
│  │ [관리자만]  │  └─────────────┘  └─────────────┘     │
│  └─────────────┘         │                             │
│                           ▼                             │
│                  ┌─────────────────┐                    │
│                  │  CSV 다운로드   │                    │
│                  │    (UC-005)    │                    │
│                  └─────────────────┘                    │
│                                                         │
│                  ┌─────────────────┐                    │
│                  │   로그아웃      │                    │
│                  │   (UC-007)     │                    │
│                  └─────────────────┘                    │
└─────────────────────────────────────────────────────────┘
```

## 유스케이스 구조

각 유스케이스 문서는 다음 구조로 작성되어 있습니다:

1. **Primary Actor**: 주요 행위자 정의
2. **Precondition**: 사용자 관점의 사전 조건
3. **Trigger**: 유스케이스 시작 트리거
4. **Main Scenario**: 정상 흐름 (Happy Path)
5. **Alternative Scenarios**: 대안 시나리오 및 예외 처리
6. **Edge Cases**: 엣지케이스 및 특수 상황
7. **Business Rules**: 비즈니스 규칙 (BR-XXX 형식)
8. **Sequence Diagram**: PlantUML 시퀀스 다이어그램
9. **Post-conditions**: 성공/실패 시 결과 상태
10. **Related Use Cases**: 관련 유스케이스

## 명명 규칙

- **유스케이스 ID**: UC-XXX (예: UC-001)
- **비즈니스 규칙 ID**: BR-XXX (예: BR-001)
- **대안 시나리오**: [단계번호][소문자] (예: 3a, 4b)
- **대안 시나리오 단계**: [시나리오ID][단계번호] (예: 3a1, 3a2)

## 시퀀스 다이어그램 표기

모든 시퀀스 다이어그램은 PlantUML 표준 문법을 사용하며, 다음 참여자로 구성됩니다:

- **User**: 사용자 (Actor)
- **FE (React)**: 프론트엔드
- **BE (Django)**: 백엔드
- **Supabase Auth**: 인증 서비스 (필요시)
- **Database (PostgreSQL)**: 데이터베이스

## 작성 원칙

1. **간결성**: 구현 세부사항 제외, 비즈니스 로직 중심
2. **검토 용이성**: 명확한 구조와 단계별 설명
3. **사용자 관점**: Precondition은 사용자 관점에서만 작성
4. **완결성**: 주요 시나리오 + 대안 시나리오 + 엣지케이스 모두 포함
5. **추적성**: Related Use Cases로 유스케이스 간 관계 명시

## 참고 문서

- **요구사항 문서**: `/docs/requirement.md`
- **PRD**: `/docs/prd.md`
- **Userflow**: `/docs/userflow.md`
- **Database 설계**: `/docs/database.md`
- **아키텍처**: `/CLAUDE.md`
- **TDD 규칙**: `/doc/rules/tdd.md`

## 버전 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|-----------|
| 1.0.0 | 2025-11-01 | Claude | 초안 작성 (UC-001 ~ UC-007) |

---

**문서 작성 완료**

모든 유스케이스 문서는 `/prompts/4usecase.md`의 지침을 따라 작성되었으며, userflow.md의 기능을 기반으로 합니다.
