# ê¸°ìˆ  ìŠ¤íƒ ì¶”ì²œ

## í”„ë¡œì íŠ¸ ê°œìš”
ëŒ€í•™êµ ì‚¬ë‚´ ë°ì´í„° ì‹œê°í™” ëŒ€ì‹œë³´ë“œ ê°œë°œ

## ì¶”ì²œ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
**React 18+ with TypeScript**
- íŒë‹¨ ê·¼ê±°:
  1. AI ì¹œí™”ì„±: ê°€ì¥ ì¸ê¸°ìˆê³  AIê°€ ì˜ êµ¬í˜„í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ (GitHub Stars: 220k+)
  2. ìœ ì§€ë³´ìˆ˜: Meta(Facebook)ì—ì„œ í™œë°œíˆ ê´€ë¦¬, ëŒ€ê·œëª¨ ì»¤ë®¤ë‹ˆí‹°
  3. ì•ˆì •ì„±: í•˜ìœ„ í˜¸í™˜ì„± ìš°ìˆ˜, Breaking Change ìµœì†Œí™” ì •ì±…

**ë°ì´í„° ì‹œê°í™”: Recharts or Chart.js**
- Recharts ì¶”ì²œ ì´ìœ :
  1. React ì „ìš© ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ í†µí•© ìš©ì´
  2. ì§ê´€ì ì¸ ì„ ì–¸í˜• API
  3. ì•ˆì •ì ì´ê³  ì§€ì†ì ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ë¨
- Chart.js ëŒ€ì•ˆ:
  1. ë” ë²”ìš©ì ì´ê³  ê²€ì¦ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬
  2. react-chartjs-2ë¡œ React í†µí•© ê°€ëŠ¥

**UI í”„ë ˆì„ì›Œí¬: Material-UI (MUI) ë˜ëŠ” Ant Design**
- MUI ì¶”ì²œ ì´ìœ :
  1. Google Material Design ê¸°ë°˜, ì „ë¬¸ì ì¸ UI
  2. MIT ë¼ì´ì„ ìŠ¤, í™œë°œí•œ ìœ ì§€ë³´ìˆ˜
  3. ëŒ€ì‹œë³´ë“œ êµ¬ì¶•ì— ìµœì í™”ëœ ì»´í¬ë„ŒíŠ¸ ì œê³µ
  4. TypeScript ì™„ë²½ ì§€ì›

### Backend
**Django REST Framework (Python)**
- íŒë‹¨ ê·¼ê±°:
  1. AI ì¹œí™”ì„±: Pythonì€ AIê°€ ê°€ì¥ ì˜ êµ¬í˜„í•˜ëŠ” ì–¸ì–´, DRFëŠ” í‘œì¤€ REST API í”„ë ˆì„ì›Œí¬
  2. ìœ ì§€ë³´ìˆ˜: Django Software Foundation ê´€ë¦¬, 20ë…„ ì´ìƒ ê²€ì¦ë¨
  3. ì•ˆì •ì„±: ë§¤ìš° ì„±ìˆ™í•œ í”„ë ˆì„ì›Œí¬, í•˜ìœ„ í˜¸í™˜ì„± ìš°ìˆ˜
  4. ìƒì‚°ì„±: Admin íŒ¨ë„ ìë™ ìƒì„±, ORM ë‚´ì¥, ì¸ì¦/ê¶Œí•œ ì‹œìŠ¤í…œ ê¸°ë³¸ ì œê³µ
  5. ë°ì´í„° ì²˜ë¦¬: Pythonì˜ pandas, openpyxlë¡œ ì—‘ì…€ ì²˜ë¦¬ì— ìµœì í™”

### ë°ì´í„°ë² ì´ìŠ¤
**Supabase (PostgreSQL ê¸°ë°˜)**
- íŒë‹¨ ê·¼ê±°:
  1. PostgreSQL ê¸°ë°˜ì˜ ì˜¤í”ˆì†ŒìŠ¤ BaaS (Backend as a Service)
  2. ê´€ë¦¬í˜• ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì¸í”„ë¼ ê´€ë¦¬ ë¶ˆí•„ìš”
  3. ì‹¤ì‹œê°„ ê¸°ëŠ¥, ìë™ ë°±ì—…, Row Level Security ì œê³µ
  4. ë¬´ë£Œ í‹°ì–´ ì œê³µìœ¼ë¡œ êµìœ¡ê¸°ê´€ì— ì í•©
  5. RESTful API ìë™ ìƒì„± (ì„ íƒì  ì‚¬ìš© ê°€ëŠ¥)
  6. Railwayì™€ ì›í™œí•œ ì—°ë™

**ORM: Django ORM**
- Django ë‚´ì¥ ORM ì‚¬ìš©
- Python ê¸°ë°˜ìœ¼ë¡œ ì§ê´€ì ì¸ ì¿¼ë¦¬ ì‘ì„±
- ë§ˆì´ê·¸ë ˆì´ì…˜ ìë™ ê´€ë¦¬
- psycopg2ë¥¼ í†µí•œ PostgreSQL ì—°ê²°

### íŒŒì¼ ì²˜ë¦¬
**openpyxl ë˜ëŠ” pandas (Python)**
- openpyxl ì¶”ì²œ ì´ìœ :
  1. Pythonì—ì„œ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì—‘ì…€ ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
  2. .xlsx íŒŒì¼ ì½ê¸°/ì“°ê¸° ì™„ë²½ ì§€ì›
  3. ì•ˆì •ì ì´ê³  í™œë°œíˆ ìœ ì§€ë³´ìˆ˜ë¨
- pandas ëŒ€ì•ˆ:
  1. ë°ì´í„° ë¶„ì„ ë° ë³€í™˜ì— ìµœì í™”
  2. ì—‘ì…€ ë°ì´í„°ë¥¼ DataFrameìœ¼ë¡œ ì‰½ê²Œ ë³€í™˜
  3. ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ì— ê°•ë ¥í•¨

### ì¸ì¦
**Supabase Auth**
- íŒë‹¨ ê·¼ê±°:
  1. Supabase ë‚´ì¥ ì¸ì¦ ì‹œìŠ¤í…œìœ¼ë¡œ ë³„ë„ êµ¬í˜„ ë¶ˆí•„ìš”
  2. ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸, OAuth, Magic Link ë“± ë‹¤ì–‘í•œ ì¸ì¦ ë°©ì‹ ì§€ì›
  3. JWT í† í° ìë™ ë°œê¸‰ ë° ê´€ë¦¬
  4. Row Level Security(RLS)ì™€ ì™„ë²½í•˜ê²Œ í†µí•©
  5. ì‚¬ìš©ì ê´€ë¦¬ UI ì œê³µ (Supabase Dashboard)
  6. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ @supabase/supabase-jsë¡œ ê°„í¸í•˜ê²Œ ì—°ë™

- ì•„í‚¤í…ì²˜:
  - Frontendì—ì„œ Supabase Authë¡œ ì§ì ‘ ì¸ì¦ ì²˜ë¦¬
  - ë°±ì—”ë“œëŠ” Supabase JWT í† í° ê²€ì¦ë§Œ ìˆ˜í–‰
  - ì‚¬ìš©ì ì •ë³´ëŠ” Supabaseì˜ auth.users í…Œì´ë¸”ì— ìë™ ì €ì¥
  - ì¶”ê°€ í”„ë¡œí•„ ì •ë³´ëŠ” public.profiles í…Œì´ë¸”ì— ë³„ë„ ê´€ë¦¬

### íŒŒì¼ ì €ì¥ ë° ë¯¸ë””ì–´
**Django FileField/ImageField**
- Django ë‚´ì¥ íŒŒì¼ ì²˜ë¦¬ ê¸°ëŠ¥
- MEDIA_ROOT ì„¤ì •ìœ¼ë¡œ ì—…ë¡œë“œ íŒŒì¼ ê´€ë¦¬
- Railwayì—ì„œ ì„ì‹œ íŒŒì¼ ì €ì¥ ì§€ì› (ë˜ëŠ” S3/Cloudinary ì—°ë™ ê°€ëŠ¥)

### ê°œë°œ ë„êµ¬
- **Python 3.11+**: ìµœì‹  ì„±ëŠ¥ ê°œì„  ë° íƒ€ì… íŒíŒ… ì§€ì›
- **Poetry ë˜ëŠ” pip-tools**: ì˜ì¡´ì„± ê´€ë¦¬
- **Black + Flake8**: ì½”ë“œ í¬ë§¤íŒ… ë° ë¦°íŒ…
- **pytest**: í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **django-extensions**: ê°œë°œ í¸ì˜ì„± ë„êµ¬
- **django-cors-headers**: CORS ì„¤ì • (í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ìš©)

### Frontend ë¹Œë“œ ë„êµ¬
- **Vite**: ë¹ ë¥¸ ê°œë°œ ì„œë²„ ë° ë¹Œë“œ
- **TypeScript**: íƒ€ì… ì•ˆì •ì„±
- **ESLint + Prettier**: ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬

## ìµœì¢… ì¶”ì²œ ì•„í‚¤í…ì²˜ (í™•ì •)

### ë¶„ë¦¬í˜• ì•„í‚¤í…ì²˜ - Django REST Framework + React
```
Backend:
  - Django 5.x + Django REST Framework
  - Python 3.11+
  - Django ORM
  - openpyxl + pandas (ì—‘ì…€ ì²˜ë¦¬)
  - django-cors-headers
  - supabase-py (Supabase í´ë¼ì´ì–¸íŠ¸, JWT ê²€ì¦ìš©)

Frontend:
  - React 18 + TypeScript + Vite
  - Material-UI (MUI)
  - Recharts (ë°ì´í„° ì‹œê°í™”)
  - @supabase/supabase-js (Supabase í´ë¼ì´ì–¸íŠ¸ & Auth)
  - React Router (ë¼ìš°íŒ…)

Database & Auth:
  - Supabase (PostgreSQL ê´€ë¦¬í˜• + Auth)
  - psycopg2-binary (PostgreSQL ë“œë¼ì´ë²„)

ë°°í¬:
  - Backend: Railway
  - Frontend: Vercel ë˜ëŠ” Railway
  - Database & Auth: Supabase (í´ë¼ìš°ë“œ í˜¸ìŠ¤íŒ…)
```

## ì¶”ì²œ ì´ìœ  ìš”ì•½
1. **AI ì¹œí™”ì„±**: Pythonê³¼ DjangoëŠ” AIê°€ ê°€ì¥ ì˜ êµ¬í˜„í•˜ëŠ” ìŠ¤íƒ, ê´‘ë²”ìœ„í•œ ì˜ˆì œì™€ ë¬¸ì„œ
2. **ì•ˆì •ì„±**: Django Software Foundation ê´€ë¦¬, 20ë…„ ì´ìƒ ê²€ì¦ëœ í”„ë ˆì„ì›Œí¬
3. **í•˜ìœ„ í˜¸í™˜ì„±**: Djangoì˜ ì•ˆì •ì ì¸ LTS ë¦´ë¦¬ìŠ¤, Breaking Change ìµœì†Œí™”
4. **êµìœ¡ê¸°ê´€ ì í•©ì„±**: ì˜¤í”ˆì†ŒìŠ¤, MIT ë¼ì´ì„ ìŠ¤, ì „ì„¸ê³„ ëŒ€í•™ì—ì„œ ì‚¬ìš©
5. **ê°œë°œ íš¨ìœ¨ì„±**:
   - Django Admin ìë™ ìƒì„±ìœ¼ë¡œ ë°ì´í„° ê´€ë¦¬ ìš©ì´
   - ORMìœ¼ë¡œ SQL ì‘ì„± ìµœì†Œí™”
   - DRFì˜ Serializerë¡œ API ë¹ ë¥´ê²Œ êµ¬ì¶•
   - Pythonì˜ pandas/openpyxlë¡œ ì—‘ì…€ ì²˜ë¦¬ ê°„í¸
6. **ë°°í¬ í¸ì˜ì„±**: Railwayì—ì„œ Python í™˜ê²½ ì™„ë²½ ì§€ì›, Supabase ì—°ë™ ê°„ë‹¨
7. **ë¹„ìš© íš¨ìœ¨ì„±**: ëª¨ë‘ ë¬´ë£Œ í‹°ì–´ ì œê³µ (Railway, Supabase, Vercel)

## í”„ë¡œì íŠ¸ êµ¬ì¡° ì œì•ˆ

### Backend (Django) ë””ë ‰í† ë¦¬ êµ¬ì¡°:
```
backend/
â”œâ”€â”€ config/                  # Django í”„ë¡œì íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ dashboard/          # ëŒ€ì‹œë³´ë“œ ì•±
â”‚   â”‚   â”œâ”€â”€ models.py       # ë°ì´í„° ëª¨ë¸ (ì‹¤ì , ë…¼ë¬¸, í•™ìƒ, ì˜ˆì‚° ë“±)
â”‚   â”‚   â”œâ”€â”€ serializers.py  # DRF Serializer
â”‚   â”‚   â”œâ”€â”€ views.py        # API Views
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ services/       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚       â””â”€â”€ excel_parser.py  # ì—‘ì…€ íŒŒì‹± ë¡œì§
â”‚   â”œâ”€â”€ accounts/           # ì‚¬ìš©ì í”„ë¡œí•„ ì•±
â”‚   â”‚   â”œâ”€â”€ models.py       # ì¶”ê°€ í”„ë¡œí•„ ì •ë³´ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ serializers.py
â”‚   â”‚   â””â”€â”€ views.py        # í”„ë¡œí•„ ì¡°íšŒ/ìˆ˜ì • API
â”‚   â””â”€â”€ uploads/            # íŒŒì¼ ì—…ë¡œë“œ ì•±
â”‚       â”œâ”€â”€ models.py
â”‚       â”œâ”€â”€ views.py
â”‚       â””â”€â”€ utils.py
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ supabase_auth.py   # Supabase JWT ê²€ì¦ ë¯¸ë“¤ì›¨ì–´
â”œâ”€â”€ media/                  # ì—…ë¡œë“œëœ íŒŒì¼
â”œâ”€â”€ requirements.txt        # Python ì˜ì¡´ì„±
â”œâ”€â”€ manage.py
â””â”€â”€ railway.toml           # Railway ë°°í¬ ì„¤ì •

```

### Frontend (React) ë””ë ‰í† ë¦¬ êµ¬ì¡°:
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/         # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ charts/         # ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ BarChart.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LineChart.tsx
â”‚   â”‚   â”‚   â””â”€â”€ PieChart.tsx
â”‚   â”‚   â”œâ”€â”€ layout/         # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”‚   â””â”€â”€ common/         # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ pages/              # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Upload.tsx
â”‚   â”‚   â””â”€â”€ DataView.tsx
â”‚   â”œâ”€â”€ lib/                # ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
â”‚   â”‚   â””â”€â”€ supabase.ts     # Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ services/           # API ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ api.ts          # Axios ì¸ìŠ¤í„´ìŠ¤ (JWT ì¸í„°ì…‰í„°)
â”‚   â”‚   â””â”€â”€ dashboard.ts    # ëŒ€ì‹œë³´ë“œ API
â”‚   â”œâ”€â”€ contexts/           # React Context
â”‚   â”‚   â””â”€â”€ AuthContext.tsx # Supabase Auth ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ types/              # TypeScript íƒ€ì…
â”‚   â”œâ”€â”€ hooks/              # Custom Hooks
â”‚   â”œâ”€â”€ utils/              # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

## í•µì‹¬ Python íŒ¨í‚¤ì§€ ëª©ë¡
```txt
Django>=5.0,<5.1
djangorestframework>=3.14
django-cors-headers>=4.3
psycopg2-binary>=2.9
python-decouple>=3.8
openpyxl>=3.1
pandas>=2.1
Pillow>=10.1
gunicorn>=21.2  # Railway ë°°í¬ìš©
whitenoise>=6.6  # ì •ì  íŒŒì¼ ì„œë¹™
supabase>=2.0  # Supabase í´ë¼ì´ì–¸íŠ¸ (JWT ê²€ì¦ìš©)
PyJWT>=2.8  # JWT í† í° ê²€ì¦
```

## í•µì‹¬ Frontend íŒ¨í‚¤ì§€ ëª©ë¡
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "@mui/material": "^5.14.0",
    "@mui/icons-material": "^5.14.0",
    "@emotion/react": "^11.11.0",
    "@emotion/styled": "^11.11.0",
    "recharts": "^2.10.0",
    "@supabase/supabase-js": "^2.38.0",
    "axios": "^1.6.0"
  }
}
```

## Railway ë°°í¬ ì„¤ì •
```toml
[build]
builder = "NIXPACKS"

[deploy]
startCommand = "gunicorn config.wsgi:application"
healthcheckPath = "/api/health/"
restartPolicyType = "ON_FAILURE"

[env]
DJANGO_SETTINGS_MODULE = "config.settings"
```

## Supabase ì—°ê²° ì„¤ì •

### Backend (Django settings.py)
```python
from decouple import config

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Supabase PostgreSQL)
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': config('DB_NAME'),
        'USER': config('DB_USER'),
        'PASSWORD': config('DB_PASSWORD'),
        'HOST': config('DB_HOST'),  # Supabase í˜¸ìŠ¤íŠ¸
        'PORT': config('DB_PORT', default='5432'),
    }
}

# Supabase ì„¤ì • (JWT ê²€ì¦ìš©)
SUPABASE_URL = config('SUPABASE_URL')
SUPABASE_KEY = config('SUPABASE_ANON_KEY')  # ë˜ëŠ” SERVICE_ROLE_KEY
SUPABASE_JWT_SECRET = config('SUPABASE_JWT_SECRET')
```

### Backend JWT ê²€ì¦ ë¯¸ë“¤ì›¨ì–´ ì˜ˆì‹œ
```python
# middleware/supabase_auth.py
import jwt
from django.conf import settings
from rest_framework.authentication import BaseAuthentication
from rest_framework.exceptions import AuthenticationFailed

class SupabaseAuthentication(BaseAuthentication):
    def authenticate(self, request):
        auth_header = request.headers.get('Authorization')
        if not auth_header or not auth_header.startswith('Bearer '):
            return None

        token = auth_header.split(' ')[1]
        try:
            payload = jwt.decode(
                token,
                settings.SUPABASE_JWT_SECRET,
                algorithms=['HS256'],
                audience='authenticated'
            )
            # payloadì—ì„œ user ì •ë³´ ì¶”ì¶œ
            user_id = payload.get('sub')
            return (user_id, token)
        except jwt.InvalidTokenError:
            raise AuthenticationFailed('Invalid token')
```

### Frontend (Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •)
```typescript
// src/lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY

export const supabase = createClient(supabaseUrl, supabaseAnonKey)

// ì¸ì¦ í—¬í¼ í•¨ìˆ˜
export const signIn = async (email: string, password: string) => {
  const { data, error } = await supabase.auth.signInWithPassword({
    email,
    password,
  })
  return { data, error }
}

export const signUp = async (email: string, password: string) => {
  const { data, error } = await supabase.auth.signUp({
    email,
    password,
  })
  return { data, error }
}

export const signOut = async () => {
  const { error } = await supabase.auth.signOut()
  return { error }
}

export const getCurrentUser = async () => {
  const { data: { user } } = await supabase.auth.getUser()
  return user
}

// í† í° ê°€ì ¸ì˜¤ê¸° (ë°±ì—”ë“œ API í˜¸ì¶œ ì‹œ ì‚¬ìš©)
export const getAccessToken = async () => {
  const { data: { session } } = await supabase.auth.getSession()
  return session?.access_token
}
```

### Frontend Axios ì¸í„°ì…‰í„° (ìë™ í† í° í¬í•¨)
```typescript
// src/services/api.ts
import axios from 'axios'
import { getAccessToken } from '../lib/supabase'

const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:8000/api',
})

// ìš”ì²­ ì¸í„°ì…‰í„°: ëª¨ë“  ìš”ì²­ì— Supabase JWT í† í° ì¶”ê°€
api.interceptors.request.use(async (config) => {
  const token = await getAccessToken()
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

export default api
```

## ì¸ì¦ í”Œë¡œìš°

1. **íšŒì›ê°€ì…/ë¡œê·¸ì¸**:
   - Frontendì—ì„œ `@supabase/supabase-js`ë¡œ Supabase Auth ì§ì ‘ í˜¸ì¶œ
   - ì„±ê³µ ì‹œ JWT í† í° ìë™ ë°œê¸‰ (localStorageì— ì €ì¥)

2. **ë°±ì—”ë“œ API í˜¸ì¶œ**:
   - Frontendì—ì„œ Axios ìš”ì²­ ì‹œ Authorization í—¤ë”ì— Supabase JWT í¬í•¨
   - Backendì—ì„œ JWT ê²€ì¦ í›„ ì‚¬ìš©ì ì‹ë³„

3. **ì‚¬ìš©ì í”„ë¡œí•„**:
   - Supabaseì˜ `auth.users` í…Œì´ë¸”ì— ê¸°ë³¸ ì •ë³´ ìë™ ì €ì¥
   - ì¶”ê°€ ì •ë³´ëŠ” `public.profiles` í…Œì´ë¸”ì— ì €ì¥ (Django ORMìœ¼ë¡œ ê´€ë¦¬)

4. **ê¶Œí•œ ê´€ë¦¬**:
   - Supabase RLS(Row Level Security)ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ ê¶Œí•œ ì„¤ì •
   - Djangoì—ì„œë„ ì¶”ê°€ ê¶Œí•œ ê²€ì¦ ê°€ëŠ¥

---

## í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶• ì „ëµ

### TDD ì›ì¹™ ì¤€ìˆ˜
í”„ë¡œì íŠ¸ëŠ” `docs/rules/tdd.md`ì— ëª…ì‹œëœ **Red â†’ Green â†’ Refactor** ì‚¬ì´í´ì„ ì—„ê²©íˆ ë”°ë¦…ë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ ì „ëµ

```
        /\
       /  \  E2E Tests (10%)
      /----\  - ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤
     /      \ - Playwright (Frontend)
    /--------\ - pytest E2E (Backend)
   /          \
  / Integration\ Tests (20%)
 /    Tests     \ - API Endpoints
/--------------\ - ë°ì´í„° íë¦„ ê²€ì¦
/              \
/  Unit Tests   \ (70%)
/   (Pure Logic) \ - Service Layer
/------------------\ - Repository Layer
     Fast & Many      - Utility Functions
```

### Backend í…ŒìŠ¤íŠ¸ êµ¬ì¡°

#### 1. Unit Tests (70%) - ìˆœìˆ˜ í•¨ìˆ˜ ì¤‘ì‹¬
**ìœ„ì¹˜**: `apps/{app_name}/tests/unit/`

**ì „ëµ**:
- **Service Layer**: Mock Repositoryë¥¼ ì‚¬ìš©í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸
- **Repository Layer**: In-memory SQLite DB ì‚¬ìš© (ëª¨í‚¹ ìµœì†Œí™”)
- **Utility Functions**: ì™„ì „ ë…ë¦½ì ì¸ ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸

**ì˜ˆì‹œ**:
```python
# apps/dashboard/tests/unit/test_metric_calculator.py
from apps.dashboard.services.metric_calculator import MetricCalculator
from apps.dashboard.domain.models import PerformanceData
from decimal import Decimal

class TestMetricCalculator:
    """ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ - ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ"""

    def test_calculate_growth_rate_returns_correct_percentage(self):
        # Arrange
        calculator = MetricCalculator()
        previous = Decimal("100")
        current = Decimal("150")

        # Act
        growth_rate = calculator.calculate_growth_rate(previous, current)

        # Assert
        assert growth_rate == Decimal("50.0")

    def test_calculate_growth_rate_handles_zero_previous(self):
        # Arrange
        calculator = MetricCalculator()

        # Act & Assert
        with pytest.raises(ValueError, match="ì´ì „ ê°’ì€ 0ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"):
            calculator.calculate_growth_rate(Decimal("0"), Decimal("100"))
```

**ëª¨í‚¹ ìµœì†Œí™” ì›ì¹™**:
- RepositoryëŠ” ì‹¤ì œ In-memory DBë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸
- ì™¸ë¶€ API í˜¸ì¶œë§Œ ëª¨í‚¹ (Supabase Auth, Email Service ë“±)

```python
# apps/uploads/tests/unit/test_excel_parser.py
import pytest
from apps.uploads.services.excel_parser import PerformanceExcelParser

class TestPerformanceExcelParser:
    """íŒŒì¼ íŒŒì‹± ìˆœìˆ˜ ë¡œì§ í…ŒìŠ¤íŠ¸"""

    def test_parse_valid_excel_returns_correct_data_structure(self, tmp_path):
        # Arrange
        parser = PerformanceExcelParser()
        excel_file = tmp_path / "test.xlsx"
        # ì‹¤ì œ ì—‘ì…€ íŒŒì¼ ìƒì„± (openpyxl ì‚¬ìš©)
        create_test_excel(excel_file, [
            {"department": "ì»´í“¨í„°ê³µí•™ê³¼", "amount": 1000},
        ])

        # Act
        result = parser.parse(str(excel_file))

        # Assert
        assert len(result) == 1
        assert result[0].department == "ì»´í“¨í„°ê³µí•™ê³¼"
        assert result[0].amount == Decimal("1000")
```

#### 2. Integration Tests (20%)
**ìœ„ì¹˜**: `apps/{app_name}/tests/integration/`

**ì „ëµ**:
- Django TestClient ì‚¬ìš©
- ì‹¤ì œ Test Database ì‚¬ìš© (PostgreSQL)
- API Request â†’ Service â†’ Repository â†’ DB ì „ì²´ íë¦„ ê²€ì¦

```python
# apps/dashboard/tests/integration/test_dashboard_api.py
import pytest
from rest_framework.test import APIClient
from django.contrib.auth import get_user_model

@pytest.mark.django_db
class TestDashboardAPI:
    """API Endpoint í†µí•© í…ŒìŠ¤íŠ¸"""

    def test_get_dashboard_returns_200_with_valid_data(self, authenticated_client):
        # Arrange
        # ì‹¤ì œ DBì— í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
        PerformanceModel.objects.create(
            department="ì»´í“¨í„°ê³µí•™ê³¼",
            amount=1000,
            date="2024-01-01"
        )

        # Act
        response = authenticated_client.get('/api/dashboard/')

        # Assert
        assert response.status_code == 200
        assert 'summary' in response.json()
        assert response.json()['summary']['total_performance'] == 1000
```

#### 3. E2E Tests (10%)
**ìœ„ì¹˜**: `tests/e2e/`

**ì „ëµ**:
- pytest + Playwright (ë˜ëŠ” Selenium)
- ì‹¤ì œ ë¸Œë¼ìš°ì € ì‹œë®¬ë ˆì´ì…˜
- ì£¼ìš” ì‚¬ìš©ì í”Œë¡œìš° ê²€ì¦

```python
# tests/e2e/test_excel_upload_flow.py
import pytest
from playwright.sync_api import Page

@pytest.mark.e2e
def test_user_can_upload_excel_and_view_dashboard(page: Page):
    """E2E: ì—‘ì…€ ì—…ë¡œë“œ â†’ ëŒ€ì‹œë³´ë“œ í™•ì¸"""

    # 1. ë¡œê·¸ì¸
    page.goto("http://localhost:3000/login")
    page.fill('input[name="email"]', "test@example.com")
    page.fill('input[name="password"]', "password123")
    page.click('button[type="submit"]')

    # 2. ì—‘ì…€ ì—…ë¡œë“œ
    page.goto("http://localhost:3000/upload")
    page.set_input_files('input[type="file"]', 'test_data.xlsx')
    page.click('button:has-text("ì—…ë¡œë“œ")')

    # 3. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸
    assert page.locator('text=ì—…ë¡œë“œ ì™„ë£Œ').is_visible()

    # 4. ëŒ€ì‹œë³´ë“œì—ì„œ ë°ì´í„° í™•ì¸
    page.goto("http://localhost:3000/dashboard")
    assert page.locator('text=ì»´í“¨í„°ê³µí•™ê³¼').is_visible()
```

### Frontend í…ŒìŠ¤íŠ¸ êµ¬ì¡°

#### 1. Component Unit Tests (70%)
**ë„êµ¬**: Vitest + React Testing Library

**ì „ëµ**:
- Props ê¸°ë°˜ ë Œë”ë§ í…ŒìŠ¤íŠ¸
- ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸
- API í˜¸ì¶œì€ MSWë¡œ ëª¨í‚¹

```typescript
// src/presentation/components/charts/BarChart.test.tsx
import { render, screen } from '@testing-library/react'
import { describe, it, expect } from 'vitest'
import BarChart from './BarChart'

describe('BarChart', () => {
  it('renders chart with valid data', () => {
    // Arrange
    const mockData = [
      { name: 'ì»´í“¨í„°ê³µí•™ê³¼', value: 1000 },
      { name: 'ì „ìê³µí•™ê³¼', value: 800 },
    ]

    // Act
    render(<BarChart data={mockData} title="í•™ê³¼ë³„ ì‹¤ì " />)

    // Assert
    expect(screen.getByText('í•™ê³¼ë³„ ì‹¤ì ')).toBeInTheDocument()
    expect(screen.getByText('ì»´í“¨í„°ê³µí•™ê³¼')).toBeInTheDocument()
  })

  it('shows "no data" message when data is empty', () => {
    // Arrange
    const emptyData: any[] = []

    // Act
    render(<BarChart data={emptyData} title="í•™ê³¼ë³„ ì‹¤ì " />)

    // Assert
    expect(screen.getByText(/ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤/i)).toBeInTheDocument()
  })
})
```

#### 2. Hook Tests
```typescript
// src/application/hooks/useAuth.test.ts
import { renderHook, waitFor } from '@testing-library/react'
import { describe, it, expect, vi } from 'vitest'
import { useAuth } from './useAuth'
import { supabase } from '@/infrastructure/external/supabase'

vi.mock('@/infrastructure/external/supabase')

describe('useAuth', () => {
  it('returns user when authenticated', async () => {
    // Arrange
    vi.mocked(supabase.auth.getUser).mockResolvedValue({
      data: { user: { id: '123', email: 'test@example.com' } },
      error: null,
    })

    // Act
    const { result } = renderHook(() => useAuth())

    // Assert
    await waitFor(() => {
      expect(result.current.user).toEqual({
        id: '123',
        email: 'test@example.com',
      })
    })
  })
})
```

#### 3. Integration Tests (20%)
**ë„êµ¬**: MSW (Mock Service Worker)

```typescript
// src/services/api/dashboardApi.test.ts
import { describe, it, expect, beforeAll, afterAll, afterEach } from 'vitest'
import { setupServer } from 'msw/node'
import { http, HttpResponse } from 'msw'
import { getDashboard } from './dashboardApi'

const server = setupServer(
  http.get('/api/dashboard/', () => {
    return HttpResponse.json({
      summary: { total_performance: 1000 },
    })
  })
)

beforeAll(() => server.listen())
afterEach(() => server.resetHandlers())
afterAll(() => server.close())

describe('dashboardApi', () => {
  it('fetches dashboard data successfully', async () => {
    // Act
    const data = await getDashboard()

    // Assert
    expect(data.summary.total_performance).toBe(1000)
  })
})
```

#### 4. E2E Tests (10%)
**ë„êµ¬**: Playwright

```typescript
// src/tests/e2e/dashboard.spec.ts
import { test, expect } from '@playwright/test'

test('user can view dashboard after login', async ({ page }) => {
  // 1. ë¡œê·¸ì¸
  await page.goto('http://localhost:5173/login')
  await page.fill('input[name="email"]', 'test@example.com')
  await page.fill('input[name="password"]', 'password123')
  await page.click('button[type="submit"]')

  // 2. ëŒ€ì‹œë³´ë“œ í™•ì¸
  await expect(page).toHaveURL(/.*dashboard/)
  await expect(page.locator('h1')).toContainText('ëŒ€ì‹œë³´ë“œ')

  // 3. ì°¨íŠ¸ ë Œë”ë§ í™•ì¸
  await expect(page.locator('[role="img"][aria-label="chart"]')).toBeVisible()
})
```

### í…ŒìŠ¤íŠ¸ ë„êµ¬ ë° íŒ¨í‚¤ì§€

#### Backend í…ŒìŠ¤íŠ¸ íŒ¨í‚¤ì§€
```txt
# requirements/test.txt
pytest>=7.4.0
pytest-django>=4.5.0
pytest-cov>=4.1.0              # ì»¤ë²„ë¦¬ì§€ ì¸¡ì •
pytest-mock>=3.11.0            # Mock í—¬í¼
pytest-xdist>=3.3.0            # ë³‘ë ¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
factory-boy>=3.3.0             # í…ŒìŠ¤íŠ¸ ë°ì´í„° íŒ©í† ë¦¬
faker>=19.0.0                  # ê°€ì§œ ë°ì´í„° ìƒì„±
freezegun>=1.2.0               # ì‹œê°„ Mock
responses>=0.23.0              # HTTP Mock
playwright>=1.38.0             # E2E í…ŒìŠ¤íŠ¸
```

#### Frontend í…ŒìŠ¤íŠ¸ íŒ¨í‚¤ì§€
```json
{
  "devDependencies": {
    "@testing-library/react": "^14.0.0",
    "@testing-library/jest-dom": "^6.1.0",
    "@testing-library/user-event": "^14.5.0",
    "@vitest/ui": "^0.34.0",
    "vitest": "^0.34.0",
    "jsdom": "^22.1.0",
    "msw": "^1.3.0",
    "@playwright/test": "^1.38.0",
    "c8": "^8.0.0"
  }
}
```

### ì„¤ì • íŒŒì¼

#### pytest.ini
```ini
[pytest]
DJANGO_SETTINGS_MODULE = config.settings.test
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts =
    --strict-markers
    --tb=short
    --cov-report=html
    --cov-report=term-missing
    --cov-fail-under=80
    -n auto
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (DB access)
    e2e: End-to-end tests (slow)
    slow: Slow running tests
```

#### vitest.config.ts
```typescript
import { defineConfig } from 'vitest/config'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/tests/setup.ts',
    coverage: {
      provider: 'c8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'src/tests/',
      ],
      lines: 80,
      functions: 80,
      branches: 80,
      statements: 80,
    },
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
```

#### playwright.config.ts
```typescript
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './src/tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:5173',
    trace: 'on-first-retry',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:5173',
    reuseExistingServer: !process.env.CI,
  },
})
```

### CI/CD í†µí•©

#### .github/workflows/test.yml
```yaml
name: Run Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  backend-tests:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432

    steps:
      - uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          cd backend
          pip install -r requirements/test.txt

      - name: Run unit tests
        run: |
          cd backend
          pytest -m unit --cov=apps --cov-report=xml

      - name: Run integration tests
        run: |
          cd backend
          pytest -m integration --cov=apps --cov-append --cov-report=xml
        env:
          DB_HOST: localhost
          DB_PORT: 5432
          DB_NAME: test_db
          DB_USER: postgres
          DB_PASSWORD: postgres

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./backend/coverage.xml

  frontend-tests:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: |
          cd frontend
          npm ci

      - name: Run unit tests
        run: |
          cd frontend
          npm run test:coverage

      - name: Run E2E tests
        run: |
          cd frontend
          npx playwright install --with-deps
          npm run test:e2e

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./frontend/coverage/coverage-final.json
```

### TDD ì›Œí¬í”Œë¡œìš° ì²´í¬ë¦¬ìŠ¤íŠ¸

```markdown
## ê¸°ëŠ¥ ê°œë°œ ì „ í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] êµ¬í˜„í•  ì‹œë‚˜ë¦¬ì˜¤ ëª©ë¡ ì‘ì„± (ì£¼ì„ìœ¼ë¡œ)
- [ ] ê°€ì¥ ê°„ë‹¨í•œ ì‹œë‚˜ë¦¬ì˜¤ë¶€í„° ì‹œì‘
- [ ] ğŸ”´ RED: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰ â†’ ì˜¬ë°”ë¥¸ ì´ìœ ë¡œ ì‹¤íŒ¨í•˜ëŠ”ì§€ í™•ì¸
- [ ] ğŸŸ¢ GREEN: ìµœì†Œí•œì˜ ì½”ë“œë¡œ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ğŸ”µ REFACTOR: ì¤‘ë³µ ì œê±°, ë„¤ì´ë° ê°œì„ 
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ ì—¬ì „íˆ í†µê³¼í•˜ëŠ”ì§€ í™•ì¸
- [ ] ì‘ì€ ë‹¨ìœ„ë¡œ ì»¤ë°‹
- [ ] ë‹¤ìŒ ì‹œë‚˜ë¦¬ì˜¤ë¡œ ë°˜ë³µ

## PR ë¨¸ì§€ ì „ í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (pytest / vitest)
- [ ] ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ í’ˆì§ˆ ê²€í† 
- [ ] CI/CD íŒŒì´í”„ë¼ì¸ í†µê³¼
- [ ] E2E í…ŒìŠ¤íŠ¸ í†µê³¼
```

### ëª¨í‚¹ ìµœì†Œí™” ì „ëµ ë° ì´ìœ 

**ì›ì¹™**: ê°€ëŠ¥í•œ ì‹¤ì œ êµ¬í˜„ì„ ì‚¬ìš©í•˜ê³ , ë¶ˆê°€í”¼í•œ ê²½ìš°ë§Œ ëª¨í‚¹

**ëª¨í‚¹ì´ í•„ìš”í•œ ê²½ìš°**:
1. **ì™¸ë¶€ API í˜¸ì¶œ** (Supabase Auth, Email Service)
   - ì´ìœ : ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ì˜ì¡´í•˜ë©´ í…ŒìŠ¤íŠ¸ê°€ ëŠë ¤ì§€ê³  ë¶ˆì•ˆì •í•´ì§
   - ë„êµ¬: `responses` (Backend), `msw` (Frontend)

2. **ì‹œê°„ ì˜ì¡´ì„±** (í˜„ì¬ ì‹œê°, ë‚ ì§œ ê³„ì‚°)
   - ì´ìœ : í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì‹¤í–‰ ì‹œì ì— ë”°ë¼ ë‹¬ë¼ì§
   - ë„êµ¬: `freezegun`

3. **íŒŒì¼ ì‹œìŠ¤í…œ** (ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ)
   - ì´ìœ : í…ŒìŠ¤íŠ¸ ì†ë„ ì €í•˜
   - ë„êµ¬: `tmp_path` fixture

**ëª¨í‚¹í•˜ì§€ ì•ŠëŠ” ê²½ìš°**:
1. **ë°ì´í„°ë² ì´ìŠ¤**
   - ëŒ€ì‹  In-memory SQLite (unit) ë˜ëŠ” Test DB (integration) ì‚¬ìš©
   - ì´ìœ : ì‹¤ì œ DB ë™ì‘ê³¼ ì°¨ì´ê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ

2. **Repository Layer**
   - ëŒ€ì‹  ì‹¤ì œ Repository êµ¬í˜„ ì‚¬ìš©
   - ì´ìœ : Service í…ŒìŠ¤íŠ¸ì—ì„œ ì‹¤ì œ ë°ì´í„° íë¦„ ê²€ì¦ í•„ìš”

3. **ìˆœìˆ˜ í•¨ìˆ˜**
   - ëª¨í‚¹ ë¶ˆí•„ìš” (ì…ë ¥ â†’ ì¶œë ¥ë§Œ ê²€ì¦)

**íš¨ê³¼**:
- í…ŒìŠ¤íŠ¸ê°€ ì‹¤ì œ ì½”ë“œ ë™ì‘ì„ ì •í™•íˆ ë°˜ì˜
- ë¦¬íŒ©í† ë§ ì‹œ í…ŒìŠ¤íŠ¸ê°€ ê¹¨ì§€ì§€ ì•ŠìŒ (êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ ë…ë¦½ì )
- í…ŒìŠ¤íŠ¸ ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ê°ì†Œ

---
